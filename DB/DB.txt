CREATE TABLE Address (
    AddressID INT PRIMARY KEY identity(1,1),
    EntityType INT NOT NULL,
    EntityID INT NOT NULL,
    AddressType INT NOT NULL,
    LandMark NVARCHAR(100) NOT NULL,
    StreetAddress NVARCHAR(100) NOT NULL,
    City NVARCHAR(100) NOT NULL,
    PostalCode NVARCHAR(20) NOT NULL,
    Country NVARCHAR(100) NOT NULL
);


CREATE TABLE Cart (
    CartID INT PRIMARY KEY identity(1,1),
    UserID INT NOT NULL,
    ProductID INT NOT NULL,
    Quantity INT NOT NULL,
    DiscountID INT NULL,
    CreatedDate DATETIME NOT NULL,
    UpdatedDate DATETIME NULL,
    TotalPrice DECIMAL(10, 2) NOT NULL,
   
);

CREATE TABLE Category (
    CategoryID INT PRIMARY KEY identity(1,1),
    CategoryName NVARCHAR(100) NOT NULL,
    Description NVARCHAR(200) NULL,
    CreatedBy INT NULL,
    CreatedDate DATETIME NOT NULL,
);

CREATE TABLE Discount (
    DiscountID INT PRIMARY KEY identity(1,1),
    DiscountName NVARCHAR(100) NOT NULL,
    DiscountType NVARCHAR(50) NOT NULL,
    DiscountValue DECIMAL(10, 2) NOT NULL,
    Status BIT NOT NULL,
    MinPurchaseAmt DECIMAL(10, 2) NULL,
    StartDate DATETIME NULL,
    EndDate DATETIME NULL
);

CREATE TABLE Inventory (
    InventoryID INT PRIMARY KEY identity(1,1),
    ProductID INT NOT NULL,
    StockQuantity INT NOT NULL,
    LastUpdated DATETIME NULL
);

CREATE TABLE [Order] (
    OrderID INT PRIMARY KEY identity(1,1),
    UserID INT NOT NULL,
    OrderDate DATETIME NOT NULL,
    TotalAmount DECIMAL(10, 2) NOT NULL,
    Status NVARCHAR(50) NOT NULL,
    PaymentID INT NULL,
    ShippingID INT NULL
);

CREATE TABLE OrderItem (
    OrderItemsID INT PRIMARY KEY identity(1,1),
    OrderID INT NOT NULL,
    ProductID INT NOT NULL,
    Quantity INT NOT NULL,
    DiscountID INT NULL,
    TotalPrice DECIMAL(10, 2) NOT NULL
);

CREATE TABLE Payment (
    PaymentID INT PRIMARY KEY identity(1,1),
    OrderID INT NOT NULL,
    Amount DECIMAL(10, 2) NOT NULL,
    PaymentDate DATETIME NULL,
    PaymentMethod NVARCHAR(50) NULL,
    TransactionID NVARCHAR(100) NULL,
    Status NVARCHAR(50) NOT NULL
);

CREATE TABLE Product (
    ProductID INT PRIMARY KEY identity(1,1),
    ProductName NVARCHAR(150) NOT NULL,
    Description NVARCHAR(150) NULL,
    ShortText NVARCHAR(150) NULL,
    UnitPrice DECIMAL(10, 2) NOT NULL,
    CategoryID INT NOT NULL,
    VendorID INT NOT NULL,
    StockQuantity INT NOT NULL,
    BarCode NVARCHAR(100) NULL,
    ImgUrl NVARCHAR(100) NULL,
    Status BIT NOT NULL,
    CreatedDate DATETIME NOT NULL,
    UpdatedDate DATETIME NULL
);

CREATE TABLE Profile (
    ProfileID INT PRIMARY KEY identity(1,1),
    ProfileName NVARCHAR(50) NOT NULL,
    Description NVARCHAR(50),
    CreatedBy INT NOT NULL,
    CreatedDate DATETIME NOT NULL,
);

CREATE TABLE User (
    UserID INT PRIMARY KEY identity(1,1),
    FirstName NVARCHAR(100) NOT NULL,
    LastName NVARCHAR(100) NOT NULL,
    Email NVARCHAR(100) NOT NULL,
    Password NVARCHAR(MAX) NOT NULL,
    Mobile NVARCHAR(20) NOT NULL,
    Status BIT NOT NULL,
    Gender NVARCHAR(MAX),
    CreatedDate DATETIME NOT NULL,
    UpdatedDate DATETIME NOT NULL,
    LastLogin DATETIME NOT NULL,
    ProfileID INT NOT NULL,
    AddressID INT NOT NULL
);

CREATE TABLE Vendor (
    VendorID INT PRIMARY KEY identity(1,1),
    UserID INT NOT NULL,
    CompanyName NVARCHAR(200) NOT NULL,
    ContactPerson NVARCHAR(200),
    Email NVARCHAR(100) NOT NULL,
    Password NVARCHAR(150) NOT NULL,
    Phone NVARCHAR(20) NOT NULL,
    AddressID INT NOT NULL,
    GSTINID INT,
    CreatedDate DATETIME NOT NULL,
    UpdatedDate DATETIME,
    Status BIT NOT NULL
);

CREATE TABLE Shipping (
    ShippingID INT PRIMARY KEY identity(1,1),
    OrderID INT NOT NULL,
    CarrierName NVARCHAR(100) NOT NULL,
    TrackingNumber NVARCHAR(50) NOT NULL,
    ShippingDate DATETIME,
    EstimatedDeliveryDate DATETIME,
    ActualDeliveryDate DATETIME,
    Status NVARCHAR(50) NOT NULL
);

CREATE TABLE Review (
    ReviewID INT PRIMARY KEY identity(1,1),
    ProductID INT NOT NULL,
    UserID INT NOT NULL,
    Rating TINYINT NOT NULL CHECK (Rating >= 1 AND Rating <= 5),
    Comment NVARCHAR(500),
    ReviewDate DATETIME NOT NULL
);

CREATE TABLE [Return] (
    ReturnID INT PRIMARY KEY identity(1,1),
    OrderID INT NOT NULL,
    ReturnReason NVARCHAR(500),
    ReturnDate DATETIME NOT NULL,
    RefundAmount DECIMAL(10, 2) NOT NULL
);
